/* --- Base + Theme --- */
:root{
  --bg: #0e1013;
  --panel: #151a21;
  --elev: #1c232c;
  --text: #e8edf2;
  --muted: #aab3bf;
  --primary: #3b82f6;
  --success: #10b981;
  --danger: #ef4444;
  --ring: #93c5fd;
  --card: #12161b;
  --line: #2a3340;
  --shadow: 0 8px 30px rgba(0,0,0,.35);
  --radius: 14px;
  --radius-sm: 12px;
  --radius-xs: 10px;
}

:root.light{
  --bg: #f6f8fb;
  --panel: #ffffff;
  --elev: #ffffff;
  --text: #111827;
  --muted: #4b5563;
  --primary: #2563eb;
  --success: #059669;
  --danger: #dc2626;
  --ring: #2563eb55;
  --card: #f8fafc;
  --line: #e5e7eb;
  --shadow: 0 10px 24px rgba(2,6,23,.08);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  color:var(--text);
  background: radial-gradient(1200px 900px at 10% -10%, #111827 0%, var(--bg) 38%) fixed;
  background-color: var(--bg);
  line-height:1.4;
}

h1,h2,h3{margin:0 0 .2rem}
h1{font-size:1.25rem}
h2{font-size:1.05rem}
h3{font-size:.95rem;color:var(--muted);font-weight:600}

/* --- Header --- */
.app-header{
  position:sticky;top:0;z-index:20;
  display:flex;align-items:center;justify-content:space-between;
  gap:1rem;padding:14px 18px;background:linear-gradient(180deg, rgba(0,0,0,.25), rgba(0,0,0,0));
  backdrop-filter: blur(8px);
  border-bottom:1px solid var(--line);
}

.brand{display:flex;align-items:center;gap:.9rem}
.brand .logo{
  width:40px;height:40px;border-radius:12px;background:linear-gradient(135deg,var(--primary),#a855f7);
  display:grid;place-items:center;color:white;font-weight:800;box-shadow:var(--shadow);
}
.brand small{display:block;color:var(--muted);margin-top:.15rem}

.actions{display:flex;gap:.5rem}

/* --- Layout --- */
.app-body{display:grid;grid-template-columns: 1.35fr .9fr;gap:18px;padding:18px;max-width:1400px;margin:0 auto}
.left,.right{display:grid;gap:18px;align-content:start}

.searchbar{display:grid;gap:10px}
.searchbar input[type=search]{
  width:100%;padding:14px 16px;border-radius:14px;border:1px solid var(--line);background:var(--panel);
  color:var(--text);outline:none;box-shadow:inset 0 0 0 1.5px transparent;transition:.18s ease;
}
.searchbar input[type=search]:focus{box-shadow:inset 0 0 0 2px var(--ring)}
.filters{display:flex;gap:10px}
.filters select{
  flex:1;appearance:none;padding:12px;border-radius:12px;border:1px solid var(--line);background:var(--panel);color:var(--text)
}

/* --- Product Grid --- */
.product-grid{display:grid;grid-template-columns: repeat(4, minmax(0,1fr));gap:12px}
.product-card{
  background:linear-gradient(180deg, var(--panel), var(--card));
  border:1px solid var(--line);border-radius:var(--radius);padding:12px;display:grid;gap:10px;box-shadow:var(--shadow);
  transition:transform .1s ease, box-shadow .2s ease;
}
.product-card:hover{transform: translateY(-2px)}
.product-card .thumb{
  height:120px;border-radius:12px;background:linear-gradient(135deg,#334155,#0f172a);
  display:grid;place-items:center;color:#e5e7eb;font-weight:700;font-size:1.4rem;letter-spacing:.02em;
}
.product-card .meta{display:flex;align-items:center;justify-content:space-between}
.product-card .name{font-weight:600}
.product-card .price{color:var(--muted)}
.product-card .btn{width:100%}

/* --- Panels --- */
.panel{
  background:linear-gradient(180deg, var(--panel), var(--card));
  border:1px solid var(--line);border-radius:var(--radius);box-shadow:var(--shadow);
}
.panel .panel-header{display:flex;align-items:end;justify-content:space-between;padding:14px 16px;border-bottom:1px dashed var(--line)}
.panel .panel-header .meta{display:flex;gap:12px;color:var(--muted)}

.cart-table-wrap{max-height:44vh;overflow:auto}
.cart-table{width:100%;border-collapse:collapse}
.cart-table th,.cart-table td{padding:10px 12px;border-bottom:1px dashed var(--line)}
.cart-table td.qty{text-align:center}
.cart-table .qtywrap{display:inline-flex;align-items:center;border:1px solid var(--line);border-radius:10px;overflow:hidden}
.cart-table .qtywrap button{padding:6px 10px}
.cart-table .qtywrap input{width:52px;text-align:center;padding:6px 0;border:0;background:transparent;color:var(--text);outline:none}

.summary{padding:14px 16px;border-top:1px dashed var(--line);display:grid;gap:12px}
.summary .row{display:grid;grid-template-columns: 1fr 1fr 1fr 1fr;gap:10px}
.summary input[type=number], .summary input[type=text]{padding:10px;border-radius:10px;border:1px solid var(--line);background:var(--elev);color:var(--text)}
.totals{margin-top:6px;border-top:1px dashed var(--line);padding-top:12px;display:grid;gap:8px}
.totals > div{display:flex;align-items:center;justify-content:space-between}
.totals .grand{font-size:1.2rem;font-weight:800}

.shortcuts{padding:14px 16px}
.shortcuts ul{margin:10px 0 0;padding-left:18px;color:var(--muted)}
kbd{padding:.2rem .45rem;border:1px solid var(--line);border-bottom-width:3px;border-radius:8px;background:var(--panel)}

/* --- Buttons --- */
.btn{
  appearance:none;border:1px solid var(--line);background:var(--elev);color:var(--text);padding:.65rem .9rem;border-radius:12px;
  cursor:pointer;font-weight:700;letter-spacing:.01em;transition:transform .05s ease, background .2s ease, border-color .2s ease;
}
.btn:hover{transform: translateY(-1px)}
.btn:active{transform: translateY(0)}
.btn.ghost{background:transparent}
.btn.primary{background:linear-gradient(135deg,var(--primary),#22d3ee);border-color:transparent;color:white;box-shadow:var(--shadow)}
.btn.danger{background: linear-gradient(135deg,#ef4444,#f59e0b);border-color:transparent;color:white}

/* --- Dialogs --- */
dialog{border:0;padding:0;background:transparent}
.dialog{min-width: min(640px, 96vw);background:var(--panel);border:1px solid var(--line);border-radius:16px;box-shadow:var(--shadow)}
.dialog header,.dialog footer{padding:12px 14px;border-bottom:1px dashed var(--line)}
.dialog footer{border-top:1px dashed var(--line);border-bottom:0;display:flex;justify-content:flex-end;gap:10px}
.dialog .dialog-body{padding:14px}
.grid2{display:grid;grid-template-columns:1fr 1fr;gap:10px}
dialog::backdrop{background:rgba(0,0,0,.5)}

/* --- Receipt --- */
#receipt{display:none}
@media print{
  body{background:white}
  .app-header,.app-body,dialog{display:none !important}
  #receipt{display:block}
  .receipt{max-width:380px;margin:0 auto;color:#000}
  .receipt h2{text-align:center;margin-bottom:8px}
  .r-meta{display:grid;gap:2px;margin-bottom:10px}
  .r-items{width:100%;border-collapse:collapse}
  .r-items th,.r-items td{padding:6px 0;border-bottom:1px dotted #000}
  .r-items th{text-align:left}
  .r-items td:last-child{text-align:right}
  .r-totals{display:grid;gap:4px;margin-top:10px}
  .r-totals .grand{font-weight:800}
  .r-note{text-align:center;margin-top:10px}
}

/* --- Responsive --- */
@media (max-width: 1100px){
  .product-grid{grid-template-columns: repeat(3, minmax(0, 1fr))}
  .app-body{grid-template-columns: 1fr}
  .cart-table-wrap{max-height:unset}
}
@media (max-width: 720px){
  .product-grid{grid-template-columns: repeat(2, minmax(0, 1fr))}
  .summary .row{grid-template-columns: 1fr 1fr}
  .grid2{grid-template-columns:1fr}
}

.muted{color:var(--muted);font-size:.85rem}
.badge{display:inline-block;padding:.18rem .5rem;border-radius:999px;border:1px solid var(--line);color:var(--muted);font-size:.75rem}
